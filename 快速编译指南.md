# å¿«é€Ÿç¼–è¯‘æŒ‡å—

## ğŸš€ 5 åˆ†é’Ÿå¿«é€Ÿç¼–è¯‘

### å‰ææ¡ä»¶
- Ubuntu 22.04 æˆ–æ›´é«˜ç‰ˆæœ¬
- å·²å®‰è£… Flutter SDKï¼ˆæˆ–æŒ‰ä¸‹é¢æ­¥éª¤å®‰è£…ï¼‰

---

## æ–¹æ³• 1ï¼šå·²æœ‰ Flutter ç¯å¢ƒ

```bash
# 1. è§£å‹æºä»£ç 
tar -xzf oled_bitmap_tool_v2.3_source.tar.gz
cd oled_bitmap_tool

# 2. å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
sudo apt-get update
sudo apt-get install -y clang cmake ninja-build pkg-config libgtk-3-dev liblzma-dev libstdc++-12-dev

# 3. è·å– Flutter ä¾èµ–
flutter pub get

# 4. ç¼–è¯‘
flutter build linux --release

# 5. è¿è¡Œ
./build/linux/x64/release/bundle/oled_bitmap_tool
```

---

## æ–¹æ³• 2ï¼šä»é›¶å¼€å§‹ï¼ˆåŒ…å« Flutter å®‰è£…ï¼‰

```bash
# 1. ä¸‹è½½å¹¶å®‰è£… Flutter
cd ~
wget https://storage.googleapis.com/flutter_infra_release/releases/stable/linux/flutter_linux_3.24.5-stable.tar.xz
tar -xf flutter_linux_3.24.5-stable.tar.xz
export PATH="$PATH:$HOME/flutter/bin"

# 2. å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt-get update
sudo apt-get install -y clang cmake ninja-build pkg-config libgtk-3-dev liblzma-dev libstdc++-12-dev

# 3. è§£å‹æºä»£ç 
cd ~
tar -xzf oled_bitmap_tool_v2.3_source.tar.gz
cd oled_bitmap_tool

# 4. è·å–ä¾èµ–
flutter pub get

# 5. ç¼–è¯‘
flutter build linux --release

# 6. è¿è¡Œ
./build/linux/x64/release/bundle/oled_bitmap_tool
```

---

## ä¸€é”®ç¼–è¯‘è„šæœ¬

åˆ›å»ºå¹¶è¿è¡Œä»¥ä¸‹è„šæœ¬ï¼š

```bash
#!/bin/bash
# build.sh - ä¸€é”®ç¼–è¯‘è„šæœ¬

set -e

echo "=== OLED ç‚¹é˜µå–æ¨¡å·¥å…· - è‡ªåŠ¨ç¼–è¯‘è„šæœ¬ ==="

# æ£€æŸ¥æ˜¯å¦å·²å®‰è£… Flutter
if ! command -v flutter &> /dev/null; then
    echo "âŒ Flutter æœªå®‰è£…"
    echo "è¯·å…ˆå®‰è£… Flutter æˆ–ä½¿ç”¨å®Œæ•´å®‰è£…è„šæœ¬"
    exit 1
fi

echo "âœ“ Flutter å·²å®‰è£…"

# æ£€æŸ¥ç³»ç»Ÿä¾èµ–
echo "æ­£åœ¨æ£€æŸ¥ç³»ç»Ÿä¾èµ–..."
DEPS="clang cmake ninja-build pkg-config libgtk-3-dev"
MISSING_DEPS=""

for dep in $DEPS; do
    if ! dpkg -l | grep -q "^ii  $dep"; then
        MISSING_DEPS="$MISSING_DEPS $dep"
    fi
done

if [ -n "$MISSING_DEPS" ]; then
    echo "ç¼ºå°‘ä¾èµ–:$MISSING_DEPS"
    echo "æ­£åœ¨å®‰è£…..."
    sudo apt-get update
    sudo apt-get install -y $MISSING_DEPS
fi

echo "âœ“ ç³»ç»Ÿä¾èµ–å·²æ»¡è¶³"

# è·å– Flutter ä¾èµ–
echo "æ­£åœ¨è·å– Flutter ä¾èµ–..."
flutter pub get

# ç¼–è¯‘
echo "æ­£åœ¨ç¼–è¯‘ Release ç‰ˆæœ¬..."
flutter build linux --release

# å®Œæˆ
echo ""
echo "=== ç¼–è¯‘å®Œæˆï¼ ==="
echo "å¯æ‰§è¡Œæ–‡ä»¶ä½ç½®: ./build/linux/x64/release/bundle/oled_bitmap_tool"
echo ""
echo "è¿è¡Œç¨‹åºï¼š"
echo "  ./build/linux/x64/release/bundle/oled_bitmap_tool"
echo ""
```

ä½¿ç”¨æ–¹æ³•ï¼š

```bash
# ä¿å­˜ä¸º build.sh
chmod +x build.sh
./build.sh
```

---

## å¸¸è§é—®é¢˜é€ŸæŸ¥

### Flutter æœªæ‰¾åˆ°
```bash
export PATH="$PATH:$HOME/flutter/bin"
```

### ç¼ºå°‘ GTK
```bash
sudo apt-get install libgtk-3-dev
```

### ç¼–è¯‘å¤±è´¥
```bash
flutter clean
flutter pub get
flutter build linux --release
```

---

## ç¼–è¯‘è¾“å‡º

æˆåŠŸç¼–è¯‘åï¼Œè¾“å‡ºç›®å½•ç»“æ„ï¼š

```
build/linux/x64/release/bundle/
â”œâ”€â”€ oled_bitmap_tool          # å¯æ‰§è¡Œæ–‡ä»¶ â† è¿™ä¸ªæ˜¯ä¸»ç¨‹åº
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ libflutter_linux_gtk.so
â””â”€â”€ data/
    â””â”€â”€ flutter_assets/
```

---

## æ‰“åŒ…å‘å¸ƒ

```bash
# ä»é¡¹ç›®æ ¹ç›®å½•æ‰“åŒ…
tar -czf oled_bitmap_tool_linux_x64.tar.gz -C build/linux/x64/release/bundle .

# æˆ–è€…è¿›å…¥ç›®å½•æ‰“åŒ…
cd build/linux/x64/release
tar -czf oled_bitmap_tool_linux_x64.tar.gz bundle/
```

---

## æ›´å¤šä¿¡æ¯

è¯¦ç»†ç¼–è¯‘è¯´æ˜è¯·æŸ¥çœ‹ `BUILD_INSTRUCTIONS.md`

---

**ç¥ç¼–è¯‘é¡ºåˆ©ï¼** ğŸ‰
